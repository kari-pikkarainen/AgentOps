<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgentOps - AI Agent Workflow Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="logo-container">
                <svg class="logo" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <!-- Abstract interconnected nodes representing AI agent workflow -->
                    <circle cx="6" cy="6" r="2.5" fill="#5e6ad2" opacity="0.9"/>
                    <circle cx="18" cy="6" r="2.5" fill="#10b981" opacity="0.9"/>
                    <circle cx="12" cy="18" r="2.5" fill="#f59e0b" opacity="0.9"/>
                    <circle cx="12" cy="12" r="1.5" fill="#1f2937" opacity="0.7"/>
                    
                    <!-- Connecting lines representing workflow connections -->
                    <path d="M8.2 7.2L9.8 10.8" stroke="#5e6ad2" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/>
                    <path d="M15.8 7.2L14.2 10.8" stroke="#10b981" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/>
                    <path d="M12 13.5L12 15.5" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/>
                </svg>
                <span class="logo-text">AgentOps</span>
            </div>
            <div class="header-center">
                <div class="workflow-progress">
                    <div class="step-indicator" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Specification</span>
                    </div>
                    <div class="step-indicator" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Location</span>
                    </div>
                    <div class="step-indicator" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-label">Tasks</span>
                    </div>
                    <div class="step-indicator" data-step="4">
                        <span class="step-number">4</span>
                        <span class="step-label">Planning</span>
                    </div>
                    <div class="step-indicator" data-step="5">
                        <span class="step-number">5</span>
                        <span class="step-label">Execution</span>
                    </div>
                </div>
                <div class="control-buttons">
                    <button id="prev-btn" class="btn btn-secondary" disabled>‚Üê Previous</button>
                    <button id="next-btn" class="btn btn-primary">Next ‚Üí</button>
                    <button id="start-execution-btn" class="btn btn-success" style="display: none;">üöÄ Start Execution</button>
                </div>
            </div>
            <div class="header-right">
                <button id="settings-btn" class="btn btn-outline btn-small" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Step 1: Project Specification -->
            <div id="step-1" class="workflow-step active">
                <div class="step-content">
                    <h2>üìã Project Specification</h2>
                    <p class="step-description">Choose your project type and provide specifications to guide the AI agent workflow</p>
                    
                    <div class="project-type-selection">
                        <h3>üéØ Project Type</h3>
                        <div class="project-type-options">
                            <label class="project-type-option">
                                <input type="radio" name="project-type" value="new" checked />
                                <div class="option-card">
                                    <div class="option-icon">üÜï</div>
                                    <div class="option-content">
                                        <h4>New Project</h4>
                                        <p>Create a new project with Claude AI-generated specifications</p>
                                    </div>
                                </div>
                            </label>
                            <label class="project-type-option">
                                <input type="radio" name="project-type" value="existing" />
                                <div class="option-card">
                                    <div class="option-icon">üìÅ</div>
                                    <div class="option-content">
                                        <h4>Existing Project</h4>
                                        <p>Continue work on an existing project by selecting its location</p>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- New Project Section -->
                    <div id="new-project-section" class="project-section">
                        <div class="claude-guidance">
                        <div class="guidance-card">
                            <h3>üéØ Step-by-Step Guide</h3>
                            <ol class="guidance-steps">
                                <li>
                                    <strong>Open Claude in a new tab</strong>
                                    <a href="https://claude.ai" target="_blank" class="btn btn-outline btn-small">Open Claude AI ‚Üí</a>
                                </li>
                                <li>
                                    <strong>Use this prompt to generate your specification:</strong>
                                    <div class="prompt-box">
                                        <pre id="claude-prompt">Create a comprehensive product specification for my software project. Include:

1. Project Overview & Vision
2. Target Audience & User Personas
3. Core Features & Functionality
4. Technical Requirements & Architecture
5. User Interface & Experience Guidelines
6. Success Metrics & KPIs
7. Timeline & Development Phases
8. Risk Assessment & Mitigation

Please ask me questions about my project idea first, then create a detailed specification in markdown format.</pre>
                                    </div>
                                    <button class="copy-btn" onclick="copyPrompt()">üìã Copy Prompt</button>
                                </li>
                                <li>
                                    <strong>Answer Claude's questions</strong> about your project idea to refine the specification
                                </li>
                                <li>
                                    <strong>Copy the final markdown specification</strong> that Claude generates
                                </li>
                                <li>
                                    <strong>Paste it below</strong> to continue with your AgentOps workflow
                                </li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="project-name">Project Name</label>
                        <input type="text" id="project-name" placeholder="Enter your project name..." />
                        <small class="form-help">This should match the project name from your Claude specification</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="claude-specification">Claude-Generated Product Specification (Markdown)</label>
                        <textarea id="claude-specification" rows="12" 
                                  placeholder="Paste the markdown specification that Claude generated here...

Example format:
# Project Name

## Project Overview
Your project description...

## Core Features
- Feature 1
- Feature 2

## Technical Requirements
- Technology stack
- Architecture decisions

... etc"></textarea>
                        <small class="form-help">Paste the complete markdown specification from Claude. This will be parsed to extract project details.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="additional-notes">Additional Notes (Optional)</label>
                        <textarea id="additional-notes" rows="3" 
                                  placeholder="Any additional thoughts, constraints, or modifications to the Claude specification..."></textarea>
                    </div>
                    
                    <div class="preview-section" id="spec-preview" style="display: none;">
                        <h3>üìÑ Specification Preview</h3>
                        <div class="preview-content" id="preview-content"></div>
                        <button class="btn btn-outline btn-small" onclick="togglePreview()">Hide Preview</button>
                    </div>
                    
                        <div class="action-buttons">
                            <button class="btn btn-outline" onclick="togglePreview()">üëÅÔ∏è Preview Specification</button>
                            <button class="btn btn-outline" onclick="extractProjectDetails()">üîç Extract Project Details</button>
                        </div>
                    </div>

                    <!-- Existing Project Section -->
                    <div id="existing-project-section" class="project-section" style="display: none;">
                        <h3>üìÅ Select Existing Project</h3>
                        <p class="section-description">Choose the location of your existing project to continue development</p>
                        
                        <div class="form-group">
                            <label for="existing-project-path">Project Directory</label>
                            <div class="file-input-group">
                                <input type="text" id="existing-project-path" placeholder="Select existing project folder..." readonly />
                                <button id="browse-existing-project-btn" class="btn btn-outline">Browse</button>
                            </div>
                            <small class="form-help">Select the root directory of your existing project</small>
                        </div>

                        <div class="form-group">
                            <label for="existing-project-name">Project Name (Optional)</label>
                            <input type="text" id="existing-project-name" placeholder="Enter project name or leave blank to auto-detect..." />
                            <small class="form-help">We'll try to auto-detect the project name from package.json, README, or directory name</small>
                        </div>

                        <div id="project-analysis" class="analysis-section" style="display: none;">
                            <h4>üìä Project Analysis</h4>
                            <div id="analysis-results" class="analysis-results">
                                <!-- Analysis results will be populated here -->
                            </div>
                            <div class="analysis-actions">
                                <button class="btn btn-outline btn-small" onclick="reanalyzeProject()">üîÑ Re-analyze</button>
                                <button class="btn btn-outline btn-small" onclick="viewProjectFiles()">üìÅ View Files</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Folder Selection -->
            <div id="step-2" class="workflow-step">
                <div class="step-content">
                    <h2>üìÅ Project Folder Selection</h2>
                    <p class="step-description">Choose your project directory and configure monitoring settings</p>
                    
                    <div class="form-group">
                        <label for="project-path">Project Directory</label>
                        <div class="file-input-group">
                            <input type="text" id="project-path" placeholder="Select project folder..." readonly />
                            <button id="browse-folder-btn" class="btn btn-outline">Browse</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Monitoring Options</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="monitor-git" checked /> Monitor Git operations
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="monitor-files" checked /> Monitor file changes
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="monitor-commands" checked /> Monitor command execution
                            </label>
                        </div>
                    </div>
                    
                    <div id="project-scan-results" class="scan-results" style="display: none;">
                        <h3>Project Analysis</h3>
                        <div id="scan-summary"></div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Task Identification -->
            <div id="step-3" class="workflow-step">
                <div class="step-content">
                    <h2>üéØ Task Identification</h2>
                    <p class="step-description">AI-generated tasks based on your project specification and analysis</p>
                    
                    <div class="loading-state" id="task-loading">
                        <div class="spinner"></div>
                        <p>Analyzing project and generating tasks...</p>
                    </div>
                    
                    <div id="identified-tasks" class="task-list" style="display: none;">
                        <h3>Identified Tasks</h3>
                        <div id="tasks-container"></div>
                        
                        <div class="task-controls">
                            <button id="add-custom-task-btn" class="btn btn-outline">+ Add Custom Task</button>
                            <button id="regenerate-tasks-btn" class="btn btn-outline">üîÑ Regenerate Tasks</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Task Planning -->
            <div id="step-4" class="workflow-step">
                <div class="step-content">
                    <h2>üìä Task Planning</h2>
                    <p class="step-description">Review and organize task execution order</p>
                    
                    <div class="planning-interface">
                        <div class="task-priorities">
                            <h3>Task Execution Order</h3>
                            <div id="task-order-list" class="sortable-list">
                                <!-- Tasks will be populated here -->
                            </div>
                        </div>
                        
                        <div class="execution-settings">
                            <h3>Execution Settings</h3>
                            <div class="form-group">
                                <label for="execution-mode">Execution Mode</label>
                                <select id="execution-mode">
                                    <option value="step-by-step">Step-by-step (manual approval)</option>
                                    <option value="semi-auto">Semi-automatic (pause on errors)</option>
                                    <option value="automatic">Fully automatic</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="claude-instance-limit">Max Claude Instances</label>
                                <input type="number" id="claude-instance-limit" value="2" min="1" max="5" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Live Execution & Monitoring -->
            <div id="step-5" class="workflow-step">
                <div class="step-content execution-view">
                    <div class="execution-header">
                        <h2>üöÄ Live Execution & Monitoring</h2>
                        <div class="execution-controls">
                            <button id="pause-execution-btn" class="btn btn-warning">‚è∏Ô∏è Pause</button>
                            <button id="stop-execution-btn" class="btn btn-danger">‚èπÔ∏è Stop</button>
                            <button id="resume-execution-btn" class="btn btn-success" style="display: none;">‚ñ∂Ô∏è Resume</button>
                        </div>
                    </div>
                    
                    <div class="execution-layout">
                        <div class="left-panel">
                            <div class="task-progress-section">
                                <h3>Task Progress</h3>
                                <div id="task-progress-list" class="task-progress-list">
                                    <!-- Task progress items will be populated here -->
                                </div>
                            </div>
                            
                            <div class="claude-instances-section">
                                <h3>Claude Instances</h3>
                                <div id="claude-instances-list" class="instances-list">
                                    <!-- Claude instances will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="right-panel">
                            <div class="live-activity-section">
                                <h3>Live Activity Feed</h3>
                                <div class="activity-filters">
                                    <button class="filter-btn active" data-filter="all">All</button>
                                    <button class="filter-btn" data-filter="command">Commands</button>
                                    <button class="filter-btn" data-filter="file_change">Files</button>
                                    <button class="filter-btn" data-filter="git_command">Git</button>
                                    <button class="filter-btn" data-filter="error">Errors</button>
                                </div>
                                <div id="live-activity-timeline" class="live-activity-timeline">
                                    <!-- Live activities will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Custom Task Modal -->
        <div id="custom-task-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Custom Task</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="custom-task-title">Task Title</label>
                        <input type="text" id="custom-task-title" placeholder="Enter task title..." />
                    </div>
                    <div class="form-group">
                        <label for="custom-task-description">Task Description</label>
                        <textarea id="custom-task-description" rows="3" 
                                  placeholder="Describe what should be accomplished..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="custom-task-priority">Priority</label>
                        <select id="custom-task-priority">
                            <option value="high">High</option>
                            <option value="medium" selected>Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancel-custom-task-btn" class="btn btn-secondary">Cancel</button>
                    <button id="add-custom-task-confirm-btn" class="btn btn-primary">Add Task</button>
                </div>
            </div>
        </div>

        <!-- Project Path Selection Modal -->
        <div id="folder-select-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Select Project Folder</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="folder-browser">
                        <div class="current-path" id="current-path">/</div>
                        <div class="folder-list" id="folder-list">
                            <!-- Folder contents will be populated here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancel-folder-select-btn" class="btn btn-secondary">Cancel</button>
                    <button id="select-folder-btn" class="btn btn-primary">Select This Folder</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>‚öôÔ∏è AgentOps Settings</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>ü§ñ AI Agent Configuration</h4>
                        
                        <div class="form-group">
                            <label for="ai-agent-provider">AI Agent Provider</label>
                            <select id="ai-agent-provider">
                                <option value="claude-code" selected>Claude Code</option>
                                <option value="coming-soon" disabled>OpenAI Agents (Coming Soon)</option>
                                <option value="coming-soon-2" disabled>Custom Agents (Coming Soon)</option>
                            </select>
                            <small class="form-help">Select the AI agent system to use for task execution</small>
                        </div>

                        <div id="claude-code-settings" class="agent-settings">
                            <div class="form-group">
                                <label for="claude-code-path">Claude Code Executable Path</label>
                                <div class="file-input-group">
                                    <input type="text" id="claude-code-path" placeholder="Auto-detect or specify path..." />
                                    <button id="detect-claude-btn" class="btn btn-outline btn-small">Auto-detect</button>
                                </div>
                                <small class="form-help">Path to the Claude Code CLI executable (leave blank for auto-detection)</small>
                            </div>

                            <div class="form-group">
                                <label for="claude-code-args">Default Arguments</label>
                                <input type="text" id="claude-code-args" placeholder="--model sonnet --max-tokens 8000" />
                                <small class="form-help">Default command line arguments for Claude Code instances</small>
                            </div>

                            <div class="form-group">
                                <label for="max-concurrent-instances">Max Concurrent Instances</label>
                                <input type="number" id="max-concurrent-instances" value="3" min="1" max="10" />
                                <small class="form-help">Maximum number of Claude Code instances to run simultaneously</small>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="auto-restart-failed" checked />
                                    Auto-restart failed instances
                                </label>
                                <small class="form-help">Automatically restart Claude Code instances that crash or fail</small>
                            </div>
                        </div>

                        <div class="claude-status">
                            <h5>üîç Claude Code Status</h5>
                            <div id="claude-status-display" class="status-display">
                                <div class="status-item">
                                    <span class="status-label">Availability:</span>
                                    <span id="claude-availability" class="status-value">Checking...</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Version:</span>
                                    <span id="claude-version" class="status-value">Unknown</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Active Instances:</span>
                                    <span id="claude-active-instances" class="status-value">0</span>
                                </div>
                            </div>
                            <button id="test-claude-connection" class="btn btn-outline btn-small">üß™ Test Connection</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>üîß General Settings</h4>
                        
                        <div class="form-group">
                            <label for="activity-history-limit">Activity History Limit</label>
                            <input type="number" id="activity-history-limit" value="1000" min="100" max="10000" step="100" />
                            <small class="form-help">Maximum number of activities to keep in memory</small>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="auto-save-workflows" checked />
                                Auto-save workflow progress
                            </label>
                            <small class="form-help">Automatically save workflow state between sessions</small>
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="show-debug-info" />
                                Show debug information
                            </label>
                            <small class="form-help">Display additional debug information in the interface</small>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="reset-settings-btn" class="btn btn-secondary">Reset to Defaults</button>
                    <button id="cancel-settings-btn" class="btn btn-secondary">Cancel</button>
                    <button id="save-settings-btn" class="btn btn-primary">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>